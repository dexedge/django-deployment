{% extends 'schletter_app/base.html' %}
{% block page_header %}
      <div class="row pb-4">
        <h2>Calendar</h2>
      <div class="col-sm-8 pt-2 ml-auto">
          <form class="form-inline" action="{% url 'schletter_app:calendar' %}" method="get">
            <label>Date range: </label>
            <input name="date_min" class="form-control ml-2" type="text" min="1781-01-21" max="1782-12-31" placeholder="1781-01-21" required>
            <input name="date_max" class="form-control ml-2" type="text" min="1781-01-21" max="1782-12-31" placeholder="1782-12-31" required>
            <button class="btn btn-primary ml-2" type="submit">Search</button>
            <a class="btn btn-secondary ml-2" href="{% url 'schletter_app:calendar' %}" role="button">Reset</a>
          </form>
      </div>
      <div class="mt-2">Click on a row to see the detail view for that event
      </div>
        
{% endblock %}
{% block content %}
  <ul>
    {% for date in calendar %}
      <li class="font-weight-bold mt-2 mb-2">{{date}}</li>
      <div class="list-group">
        {% for event in date.event_set.all %}
          {% if event.event_type == "closed" %}
            <a class="list-group-item list-group-item-action">
              {{event.title}}
            </a>
          {% elif event.title == "No title" or event.work_set.all.first.genre == "Concert" %}
            <a href="{% url 'schletter_app:event' event.pk %}" class="list-group-item list-group-item-action">
              {{event.theater}}, {{event.title}}
            </a>
          {% else %}
            <a href="{% url 'schletter_app:event' event.pk %}" class="list-group-item list-group-item-action">
              {{event.theater}}, <em>{{event.title}}</em>, {{event.work_set.all.first.genre}}
            </a>
          {% endif %}
        {% endfor %}
      <div>
    {% endfor %}
  </ul>
{% endblock content %}